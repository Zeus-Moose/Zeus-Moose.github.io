import{q as _,s as x,x as v,v as n,y as A,i as E,o as y,b as k,z as I,e as d,l as L,a2 as B,T as C,E as N,g as U,U as P}from"./XWT39uEz.js";import{u as R,p as g}from"./Dy1UM1d5.js";import{i as W,u as q,m as T}from"./BH-xFYCZ.js";const $=["src"],j=_({__name:"NuxtImg",props:W,emits:["load","error"],setup(p,{emit:t}){const s=p,l=x(),r=t,z=!1,m=R(),a=q(s),c=v(!1),o=v(),u=n(()=>m.getSizes(s.src,{...a.options.value,sizes:s.sizes,densities:s.densities,modifiers:{...a.modifiers.value,width:g(s.width),height:g(s.height)}})),w=n(()=>{const e={...a.attrs.value,"data-nuxt-img":""};return(!s.placeholder||c.value)&&(e.sizes=u.value.sizes,e.srcset=u.value.srcset),e}),h=n(()=>{let e=s.placeholder;if(e===""&&(e=!0),!e||c.value)return!1;if(typeof e=="string")return e;const i=Array.isArray(e)?e:typeof e=="number"?[e,e]:[10,10];return m(s.src,{...a.modifiers.value,width:i[0],height:i[1],quality:i[2]||50,blur:i[3]||3},a.options.value)}),f=n(()=>s.sizes?u.value.src:m(s.src,a.modifiers.value,a.options.value)),S=n(()=>h.value?h.value:f.value),b=A().isHydrating;return E(()=>{if(h.value){const e=new Image;f.value&&(e.src=f.value),s.sizes&&(e.sizes=u.value.sizes||"",e.srcset=u.value.srcset),e.onload=i=>{c.value=!0,r("load",i)},T("nuxt-image");return}o.value&&(o.value.complete&&b&&(o.value.getAttribute("data-error")?r("error",new Event("error")):r("load",new Event("load"))),o.value.onload=e=>{r("load",e)},o.value.onerror=e=>{r("error",e)})}),(e,i)=>(y(),k("img",I({ref_key:"imgEl",ref:o,class:s.placeholder&&!c.value?s.placeholderClass:void 0},{...d(z)?{onerror:"this.setAttribute('data-error', 1)"}:{},...w.value,...d(l)},{src:S.value}),null,16,$))}}),G=_({__name:"ProseImg",props:{src:{type:String,default:""},alt:{type:String,default:""},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0}},setup(p){const t=p,s=n(()=>{var l;if((l=t.src)!=null&&l.startsWith("/")&&!t.src.startsWith("//")){const r=C(N(U().app.baseURL));if(r!=="/"&&!t.src.startsWith(r))return P(r,t.src)}return t.src});return(l,r)=>(y(),L(B(d(j)),{src:d(s),alt:t.alt,width:t.width,height:t.height},null,8,["src","alt","width","height"]))}});export{G as default};
