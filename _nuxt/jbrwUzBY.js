import{u as A,p as v}from"./1O2ReoDs.js";import{i as E,u as I,m as k}from"./BZnLS7Gl.js";import{q as w,s as C,x as y,v as l,y as L,i as N,o as b,b as B,z as U,e as m,g as z,l as P,a2 as R,T as W,E as q,U as T}from"./D7_CwoEO.js";const $=["src"],j=w({__name:"NuxtImg",props:E,emits:["load","error"],setup(i,{emit:d}){const s=i,p=C(),t=d,o=!1,h=A(),r=I(s),c=y(!1),n=y(),u=l(()=>h.getSizes(s.src,{...r.options.value,sizes:s.sizes,densities:s.densities,modifiers:{...r.modifiers.value,width:v(s.width),height:v(s.height)}})),x=l(()=>{const e={...r.attrs.value,"data-nuxt-img":""};return(!s.placeholder||c.value)&&(e.sizes=u.value.sizes,e.srcset=u.value.srcset),e}),f=l(()=>{let e=s.placeholder;if(e===""&&(e=!0),!e||c.value)return!1;if(typeof e=="string")return e;const a=Array.isArray(e)?e:typeof e=="number"?[e,e]:[10,10];return h(s.src,{...r.modifiers.value,width:a[0],height:a[1],quality:a[2]||50,blur:a[3]||3},r.options.value)}),g=l(()=>s.sizes?u.value.src:h(s.src,r.modifiers.value,r.options.value)),S=l(()=>f.value?f.value:g.value),_=L().isHydrating;return N(()=>{if(f.value){const e=new Image;g.value&&(e.src=g.value),s.sizes&&(e.sizes=u.value.sizes||"",e.srcset=u.value.srcset),e.onload=a=>{c.value=!0,t("load",a)},k("nuxt-image");return}n.value&&(n.value.complete&&_&&(n.value.getAttribute("data-error")?t("error",new Event("error")):t("load",new Event("load"))),n.value.onload=e=>{t("load",e)},n.value.onerror=e=>{t("error",e)})}),(e,a)=>(b(),B("img",U({ref_key:"imgEl",ref:n,class:s.placeholder&&!c.value?s.placeholderClass:void 0},{...m(o)?{onerror:"this.setAttribute('data-error', 1)"}:{},...x.value,...m(p)},{src:S.value}),null,16,$))}}),G=w({__name:"ProseImg",props:{src:{type:String,default:""},alt:{type:String,default:""},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0}},setup(i){const d=z().public.mdc.useNuxtImage?j:"img",s=i,p=l(()=>{var t;if((t=s.src)!=null&&t.startsWith("/")&&!s.src.startsWith("//")){const o=W(q(z().app.baseURL));if(o!=="/"&&!s.src.startsWith(o))return T(o,s.src)}return s.src});return(t,o)=>(b(),P(R(m(d)),{src:m(p),alt:i.alt,width:i.width,height:i.height},null,8,["src","alt","width","height"]))}});export{G as default};
